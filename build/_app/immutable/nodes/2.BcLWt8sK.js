var io=Object.defineProperty;var co=(e,t,n)=>t in e?io(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var I=(e,t,n)=>co(e,typeof t!="symbol"?t+"":t,n);import{x as ao,y as lo,p as Je,h as uo,s as fo,n as ze}from"../chunks/scheduler.DMUGxSNz.js";import{q as ho,a as po,n as go,t as yo,S as wo,i as bo,e as Eo,s as mo,m as wn,c as vo,y as xo,h as Ao,j as $e,g as Ce,b as Vt,f as zt}from"../chunks/index.BO63g7VR.js";function _o(e,t){const n=t.token={};function r(o,s,i,a){if(t.token!==n)return;t.resolved=a;let c=t.ctx;i!==void 0&&(c=c.slice(),c[i]=a);const l=o&&(t.current=o)(c);let f=!1;t.block&&(t.blocks?t.blocks.forEach((u,h)=>{h!==s&&u&&(ho(),po(u,1,1,()=>{t.blocks[h]===u&&(t.blocks[h]=null)}),go())}):t.block.d(1),l.c(),yo(l,1),l.m(t.mount(),t.anchor),f=!0),t.block=l,t.blocks&&(t.blocks[s]=l),f&&uo()}if(ao(e)){const o=lo();if(e.then(s=>{Je(o),r(t.then,1,t.value,s),Je(null)},s=>{if(Je(o),r(t.catch,2,t.error,s),Je(null),!t.hasCatch)throw s}),t.current!==t.pending)return r(t.pending,0),!0}else{if(t.current!==t.then)return r(t.then,1,t.value,e),!0;t.resolved=e}}function So(e,t,n){const r=t.slice(),{resolved:o}=e;e.current===e.then&&(r[e.value]=o),e.current===e.catch&&(r[e.error]=o),e.block.p(r,n)}function bn(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Cn(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Bo(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");bn(e.outputLen),bn(e.blockLen)}function et(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Io(e,t){Cn(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const vt=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Nn=e=>e instanceof Uint8Array,xt=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),ee=(e,t)=>e<<32-t|e>>>t,To=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!To)throw new Error("Non little-endian hardware is not supported");function ko(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Kt(e){if(typeof e=="string"&&(e=ko(e)),!Nn(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function Lo(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!Nn(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}let On=class{clone(){return this._cloneInto()}};function Ro(e){const t=r=>e().update(Kt(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Hn(e=32){if(vt&&typeof vt.getRandomValues=="function")return vt.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function Uo(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),s=BigInt(4294967295),i=Number(n>>o&s),a=Number(n&s),c=r?4:0,l=r?0:4;e.setUint32(t+c,i,r),e.setUint32(t+l,a,r)}let $o=class extends On{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=xt(this.buffer)}update(t){et(this);const{view:n,buffer:r,blockLen:o}=this;t=Kt(t);const s=t.length;for(let i=0;i<s;){const a=Math.min(o-this.pos,s-i);if(a===o){const c=xt(t);for(;o<=s-i;i+=o)this.process(c,i);continue}r.set(t.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){et(this),Io(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:s}=this;let{pos:i}=this;n[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>o-i&&(this.process(r,0),i=0);for(let u=i;u<o;u++)n[u]=0;Uo(r,o-8,BigInt(this.length*8),s),this.process(r,0);const a=xt(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,f=this.get();if(l>f.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<l;u++)a.setUint32(4*u,f[u],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:s,destroyed:i,pos:a}=this;return t.length=o,t.pos=a,t.finished=s,t.destroyed=i,o%n&&t.buffer.set(r),t}};const Co=(e,t,n)=>e&t^~e&n,No=(e,t,n)=>e&t^e&n^t&n,Oo=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),de=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),pe=new Uint32Array(64);let Ho=class extends $o{constructor(){super(64,32,8,!1),this.A=de[0]|0,this.B=de[1]|0,this.C=de[2]|0,this.D=de[3]|0,this.E=de[4]|0,this.F=de[5]|0,this.G=de[6]|0,this.H=de[7]|0}get(){const{A:t,B:n,C:r,D:o,E:s,F:i,G:a,H:c}=this;return[t,n,r,o,s,i,a,c]}set(t,n,r,o,s,i,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=s|0,this.F=i|0,this.G=a|0,this.H=c|0}process(t,n){for(let u=0;u<16;u++,n+=4)pe[u]=t.getUint32(n,!1);for(let u=16;u<64;u++){const h=pe[u-15],g=pe[u-2],y=ee(h,7)^ee(h,18)^h>>>3,d=ee(g,17)^ee(g,19)^g>>>10;pe[u]=d+pe[u-7]+y+pe[u-16]|0}let{A:r,B:o,C:s,D:i,E:a,F:c,G:l,H:f}=this;for(let u=0;u<64;u++){const h=ee(a,6)^ee(a,11)^ee(a,25),g=f+h+Co(a,c,l)+Oo[u]+pe[u]|0,d=(ee(r,2)^ee(r,13)^ee(r,22))+No(r,o,s)|0;f=l,l=c,c=a,a=i+g|0,i=s,s=o,o=r,r=g+d|0}r=r+this.A|0,o=o+this.B|0,s=s+this.C|0,i=i+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,f=f+this.H|0,this.set(r,o,s,i,a,c,l,f)}roundClean(){pe.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Rt=Ro(()=>new Ho);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pn=BigInt(0),st=BigInt(1),Po=BigInt(2),it=e=>e instanceof Uint8Array,Mo=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ne(e){if(!it(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Mo[e[n]];return t}function Mn(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function Wt(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Oe(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const o=r*2,s=e.slice(o,o+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[r]=i}return n}function F(e){return Wt(Ne(e))}function Zt(e){if(!it(e))throw new Error("Uint8Array expected");return Wt(Ne(Uint8Array.from(e).reverse()))}function Ee(e,t){return Oe(e.toString(16).padStart(t*2,"0"))}function Ft(e,t){return Ee(e,t).reverse()}function qo(e){return Oe(Mn(e))}function K(e,t,n){let r;if(typeof t=="string")try{r=Oe(t)}catch(s){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${s}`)}else if(it(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const o=r.length;if(typeof n=="number"&&o!==n)throw new Error(`${e} expected ${n} bytes, got ${o}`);return r}function Be(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!it(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}function jo(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Do(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Vo(e){let t;for(t=0;e>Pn;e>>=st,t+=1);return t}function zo(e,t){return e>>BigInt(t)&st}const Ko=(e,t,n)=>e|(n?st:Pn)<<BigInt(t),Gt=e=>(Po<<BigInt(e-1))-st,At=e=>new Uint8Array(e),En=e=>Uint8Array.from(e);function qn(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=At(e),o=At(e),s=0;const i=()=>{r.fill(1),o.fill(0),s=0},a=(...u)=>n(o,r,...u),c=(u=At())=>{o=a(En([0]),u),r=a(),u.length!==0&&(o=a(En([1]),u),r=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const h=[];for(;u<t;){r=a();const g=r.slice();h.push(g),u+=r.length}return Be(...h)};return(u,h)=>{i(),c(u);let g;for(;!(g=h(l()));)c();return i(),g}}const Wo={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Ze(e,t,n={}){const r=(o,s,i)=>{const a=Wo[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const c=e[o];if(!(i&&c===void 0)&&!a(c,e))throw new Error(`Invalid param ${String(o)}=${c} (${typeof c}), expected ${s}`)};for(const[o,s]of Object.entries(t))r(o,s,!1);for(const[o,s]of Object.entries(n))r(o,s,!0);return e}const Zo=Object.freeze(Object.defineProperty({__proto__:null,bitGet:zo,bitLen:Vo,bitMask:Gt,bitSet:Ko,bytesToHex:Ne,bytesToNumberBE:F,bytesToNumberLE:Zt,concatBytes:Be,createHmacDrbg:qn,ensureBytes:K,equalBytes:jo,hexToBytes:Oe,hexToNumber:Wt,numberToBytesBE:Ee,numberToBytesLE:Ft,numberToHexUnpadded:Mn,numberToVarBytesBE:qo,utf8ToBytes:Do,validateObject:Ze},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const V=BigInt(0),j=BigInt(1),_e=BigInt(2),Fo=BigInt(3),Ut=BigInt(4),mn=BigInt(5),vn=BigInt(8);BigInt(9);BigInt(16);function z(e,t){const n=e%t;return n>=V?n:t+n}function Go(e,t,n){if(n<=V||t<V)throw new Error("Expected power/modulo > 0");if(n===j)return V;let r=j;for(;t>V;)t&j&&(r=r*e%n),e=e*e%n,t>>=j;return r}function G(e,t,n){let r=e;for(;t-- >V;)r*=r,r%=n;return r}function $t(e,t){if(e===V||t<=V)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=z(e,t),r=t,o=V,s=j;for(;n!==V;){const a=r/n,c=r%n,l=o-s*a;r=n,n=c,o=s,s=l}if(r!==j)throw new Error("invert: does not exist");return z(o,t)}function Jo(e){const t=(e-j)/_e;let n,r,o;for(n=e-j,r=0;n%_e===V;n/=_e,r++);for(o=_e;o<e&&Go(o,t,e)!==e-j;o++);if(r===1){const i=(e+j)/Ut;return function(c,l){const f=c.pow(l,i);if(!c.eql(c.sqr(f),l))throw new Error("Cannot find square root");return f}}const s=(n+j)/_e;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,f=a.pow(a.mul(a.ONE,o),n),u=a.pow(c,s),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let g=1;for(let d=a.sqr(h);g<l&&!a.eql(d,a.ONE);g++)d=a.sqr(d);const y=a.pow(f,j<<BigInt(l-g-1));f=a.sqr(y),u=a.mul(u,y),h=a.mul(h,f),l=g}return u}}function Yo(e){if(e%Ut===Fo){const t=(e+j)/Ut;return function(r,o){const s=r.pow(o,t);if(!r.eql(r.sqr(s),o))throw new Error("Cannot find square root");return s}}if(e%vn===mn){const t=(e-mn)/vn;return function(r,o){const s=r.mul(o,_e),i=r.pow(s,t),a=r.mul(o,i),c=r.mul(r.mul(a,_e),i),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),o))throw new Error("Cannot find square root");return l}}return Jo(e)}const Xo=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Qo(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Xo.reduce((r,o)=>(r[o]="function",r),t);return Ze(e,n)}function es(e,t,n){if(n<V)throw new Error("Expected power > 0");if(n===V)return e.ONE;if(n===j)return t;let r=e.ONE,o=t;for(;n>V;)n&j&&(r=e.mul(r,o)),o=e.sqr(o),n>>=j;return r}function ts(e,t){const n=new Array(t.length),r=t.reduce((s,i,a)=>e.is0(i)?s:(n[a]=s,e.mul(s,i)),e.ONE),o=e.inv(r);return t.reduceRight((s,i,a)=>e.is0(i)?s:(n[a]=e.mul(s,n[a]),e.mul(s,i)),o),n}function jn(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function ns(e,t,n=!1,r={}){if(e<=V)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:o,nByteLength:s}=jn(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const i=Yo(e),a=Object.freeze({ORDER:e,BITS:o,BYTES:s,MASK:Gt(o),ZERO:V,ONE:j,create:c=>z(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return V<=c&&c<e},is0:c=>c===V,isOdd:c=>(c&j)===j,neg:c=>z(-c,e),eql:(c,l)=>c===l,sqr:c=>z(c*c,e),add:(c,l)=>z(c+l,e),sub:(c,l)=>z(c-l,e),mul:(c,l)=>z(c*l,e),pow:(c,l)=>es(a,c,l),div:(c,l)=>z(c*$t(l,e),e),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>$t(c,e),sqrt:r.sqrt||(c=>i(a,c)),invertBatch:c=>ts(a,c),cmov:(c,l,f)=>f?l:c,toBytes:c=>n?Ft(c,s):Ee(c,s),fromBytes:c=>{if(c.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${c.length}`);return n?Zt(c):F(c)}});return Object.freeze(a)}function Dn(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Vn(e){const t=Dn(e);return t+Math.ceil(t/2)}function rs(e,t,n=!1){const r=e.length,o=Dn(t),s=Vn(t);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const i=n?F(e):Zt(e),a=z(i,t-j)+j;return n?Ft(a,o):Ee(a,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const os=BigInt(0),_t=BigInt(1);function ss(e,t){const n=(o,s)=>{const i=s.negate();return o?i:s},r=o=>{const s=Math.ceil(t/o)+1,i=2**(o-1);return{windows:s,windowSize:i}};return{constTimeNegate:n,unsafeLadder(o,s){let i=e.ZERO,a=o;for(;s>os;)s&_t&&(i=i.add(a)),a=a.double(),s>>=_t;return i},precomputeWindow(o,s){const{windows:i,windowSize:a}=r(s),c=[];let l=o,f=l;for(let u=0;u<i;u++){f=l,c.push(f);for(let h=1;h<a;h++)f=f.add(l),c.push(f);l=f.double()}return c},wNAF(o,s,i){const{windows:a,windowSize:c}=r(o);let l=e.ZERO,f=e.BASE;const u=BigInt(2**o-1),h=2**o,g=BigInt(o);for(let y=0;y<a;y++){const d=y*c;let p=Number(i&u);i>>=g,p>c&&(p-=h,i+=_t);const w=d,m=d+Math.abs(p)-1,S=y%2!==0,U=p<0;p===0?f=f.add(n(S,s[w])):l=l.add(n(U,s[m]))}return{p:l,f}},wNAFCached(o,s,i,a){const c=o._WINDOW_SIZE||1;let l=s.get(o);return l||(l=this.precomputeWindow(o,c),c!==1&&s.set(o,a(l))),this.wNAF(c,l,i)}}}function zn(e){return Qo(e.Fp),Ze(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...jn(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function is(e){const t=zn(e);Ze(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:o}=t;if(n){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:cs,hexToBytes:as}=Zo,Se={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=Se;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:cs(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=Se,n=typeof e=="string"?as(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:o,l:s}=Se._parseInt(n.subarray(2)),{d:i,l:a}=Se._parseInt(s);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s:i}},hexFromSig(e){const t=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const f=l.toString(16);return f.length&1?`0${f}`:f},r=t(n(e.s)),o=t(n(e.r)),s=r.length/2,i=o.length/2,a=n(s),c=n(i);return`30${n(i+s+4)}02${c}${o}02${a}${r}`}},se=BigInt(0),J=BigInt(1);BigInt(2);const xn=BigInt(3);BigInt(4);function ls(e){const t=is(e),{Fp:n}=t,r=t.toBytes||((y,d,p)=>{const w=d.toAffine();return Be(Uint8Array.from([4]),n.toBytes(w.x),n.toBytes(w.y))}),o=t.fromBytes||(y=>{const d=y.subarray(1),p=n.fromBytes(d.subarray(0,n.BYTES)),w=n.fromBytes(d.subarray(n.BYTES,2*n.BYTES));return{x:p,y:w}});function s(y){const{a:d,b:p}=t,w=n.sqr(y),m=n.mul(w,y);return n.add(n.add(m,n.mul(y,d)),p)}if(!n.eql(n.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function i(y){return typeof y=="bigint"&&se<y&&y<t.n}function a(y){if(!i(y))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(y){const{allowedPrivateKeyLengths:d,nByteLength:p,wrapPrivateKey:w,n:m}=t;if(d&&typeof y!="bigint"){if(y instanceof Uint8Array&&(y=Ne(y)),typeof y!="string"||!d.includes(y.length))throw new Error("Invalid key");y=y.padStart(p*2,"0")}let S;try{S=typeof y=="bigint"?y:F(K("private key",y,p))}catch{throw new Error(`private key must be ${p} bytes, hex or bigint, not ${typeof y}`)}return w&&(S=z(S,m)),a(S),S}const l=new Map;function f(y){if(!(y instanceof u))throw new Error("ProjectivePoint expected")}class u{constructor(d,p,w){if(this.px=d,this.py=p,this.pz=w,d==null||!n.isValid(d))throw new Error("x required");if(p==null||!n.isValid(p))throw new Error("y required");if(w==null||!n.isValid(w))throw new Error("z required")}static fromAffine(d){const{x:p,y:w}=d||{};if(!d||!n.isValid(p)||!n.isValid(w))throw new Error("invalid affine point");if(d instanceof u)throw new Error("projective point not allowed");const m=S=>n.eql(S,n.ZERO);return m(p)&&m(w)?u.ZERO:new u(p,w,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(d){const p=n.invertBatch(d.map(w=>w.pz));return d.map((w,m)=>w.toAffine(p[m])).map(u.fromAffine)}static fromHex(d){const p=u.fromAffine(o(K("pointHex",d)));return p.assertValidity(),p}static fromPrivateKey(d){return u.BASE.multiply(c(d))}_setWindowSize(d){this._WINDOW_SIZE=d,l.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:d,y:p}=this.toAffine();if(!n.isValid(d)||!n.isValid(p))throw new Error("bad point: x or y not FE");const w=n.sqr(p),m=s(d);if(!n.eql(w,m))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:d}=this.toAffine();if(n.isOdd)return!n.isOdd(d);throw new Error("Field doesn't support isOdd")}equals(d){f(d);const{px:p,py:w,pz:m}=this,{px:S,py:U,pz:k}=d,v=n.eql(n.mul(p,k),n.mul(S,m)),x=n.eql(n.mul(w,k),n.mul(U,m));return v&&x}negate(){return new u(this.px,n.neg(this.py),this.pz)}double(){const{a:d,b:p}=t,w=n.mul(p,xn),{px:m,py:S,pz:U}=this;let k=n.ZERO,v=n.ZERO,x=n.ZERO,A=n.mul(m,m),M=n.mul(S,S),R=n.mul(U,U),B=n.mul(m,S);return B=n.add(B,B),x=n.mul(m,U),x=n.add(x,x),k=n.mul(d,x),v=n.mul(w,R),v=n.add(k,v),k=n.sub(M,v),v=n.add(M,v),v=n.mul(k,v),k=n.mul(B,k),x=n.mul(w,x),R=n.mul(d,R),B=n.sub(A,R),B=n.mul(d,B),B=n.add(B,x),x=n.add(A,A),A=n.add(x,A),A=n.add(A,R),A=n.mul(A,B),v=n.add(v,A),R=n.mul(S,U),R=n.add(R,R),A=n.mul(R,B),k=n.sub(k,A),x=n.mul(R,M),x=n.add(x,x),x=n.add(x,x),new u(k,v,x)}add(d){f(d);const{px:p,py:w,pz:m}=this,{px:S,py:U,pz:k}=d;let v=n.ZERO,x=n.ZERO,A=n.ZERO;const M=t.a,R=n.mul(t.b,xn);let B=n.mul(p,S),O=n.mul(w,U),H=n.mul(m,k),q=n.add(p,w),b=n.add(S,U);q=n.mul(q,b),b=n.add(B,O),q=n.sub(q,b),b=n.add(p,m);let E=n.add(S,k);return b=n.mul(b,E),E=n.add(B,H),b=n.sub(b,E),E=n.add(w,m),v=n.add(U,k),E=n.mul(E,v),v=n.add(O,H),E=n.sub(E,v),A=n.mul(M,b),v=n.mul(R,H),A=n.add(v,A),v=n.sub(O,A),A=n.add(O,A),x=n.mul(v,A),O=n.add(B,B),O=n.add(O,B),H=n.mul(M,H),b=n.mul(R,b),O=n.add(O,H),H=n.sub(B,H),H=n.mul(M,H),b=n.add(b,H),B=n.mul(O,b),x=n.add(x,B),B=n.mul(E,b),v=n.mul(q,v),v=n.sub(v,B),B=n.mul(q,O),A=n.mul(E,A),A=n.add(A,B),new u(v,x,A)}subtract(d){return this.add(d.negate())}is0(){return this.equals(u.ZERO)}wNAF(d){return g.wNAFCached(this,l,d,p=>{const w=n.invertBatch(p.map(m=>m.pz));return p.map((m,S)=>m.toAffine(w[S])).map(u.fromAffine)})}multiplyUnsafe(d){const p=u.ZERO;if(d===se)return p;if(a(d),d===J)return this;const{endo:w}=t;if(!w)return g.unsafeLadder(this,d);let{k1neg:m,k1:S,k2neg:U,k2:k}=w.splitScalar(d),v=p,x=p,A=this;for(;S>se||k>se;)S&J&&(v=v.add(A)),k&J&&(x=x.add(A)),A=A.double(),S>>=J,k>>=J;return m&&(v=v.negate()),U&&(x=x.negate()),x=new u(n.mul(x.px,w.beta),x.py,x.pz),v.add(x)}multiply(d){a(d);let p=d,w,m;const{endo:S}=t;if(S){const{k1neg:U,k1:k,k2neg:v,k2:x}=S.splitScalar(p);let{p:A,f:M}=this.wNAF(k),{p:R,f:B}=this.wNAF(x);A=g.constTimeNegate(U,A),R=g.constTimeNegate(v,R),R=new u(n.mul(R.px,S.beta),R.py,R.pz),w=A.add(R),m=M.add(B)}else{const{p:U,f:k}=this.wNAF(p);w=U,m=k}return u.normalizeZ([w,m])[0]}multiplyAndAddUnsafe(d,p,w){const m=u.BASE,S=(k,v)=>v===se||v===J||!k.equals(m)?k.multiplyUnsafe(v):k.multiply(v),U=S(this,p).add(S(d,w));return U.is0()?void 0:U}toAffine(d){const{px:p,py:w,pz:m}=this,S=this.is0();d==null&&(d=S?n.ONE:n.inv(m));const U=n.mul(p,d),k=n.mul(w,d),v=n.mul(m,d);if(S)return{x:n.ZERO,y:n.ZERO};if(!n.eql(v,n.ONE))throw new Error("invZ was invalid");return{x:U,y:k}}isTorsionFree(){const{h:d,isTorsionFree:p}=t;if(d===J)return!0;if(p)return p(u,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:d,clearCofactor:p}=t;return d===J?this:p?p(u,this):this.multiplyUnsafe(t.h)}toRawBytes(d=!0){return this.assertValidity(),r(u,this,d)}toHex(d=!0){return Ne(this.toRawBytes(d))}}u.BASE=new u(t.Gx,t.Gy,n.ONE),u.ZERO=new u(n.ZERO,n.ONE,n.ZERO);const h=t.nBitLength,g=ss(u,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:u,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:i}}function us(e){const t=zn(e);return Ze(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function fs(e){const t=us(e),{Fp:n,n:r}=t,o=n.BYTES+1,s=2*n.BYTES+1;function i(b){return se<b&&b<n.ORDER}function a(b){return z(b,r)}function c(b){return $t(b,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:f,weierstrassEquation:u,isWithinCurveOrder:h}=ls({...t,toBytes(b,E,_){const L=E.toAffine(),T=n.toBytes(L.x),$=Be;return _?$(Uint8Array.from([E.hasEvenY()?2:3]),T):$(Uint8Array.from([4]),T,n.toBytes(L.y))},fromBytes(b){const E=b.length,_=b[0],L=b.subarray(1);if(E===o&&(_===2||_===3)){const T=F(L);if(!i(T))throw new Error("Point is not on curve");const $=u(T);let P=n.sqrt($);const N=(P&J)===J;return(_&1)===1!==N&&(P=n.neg(P)),{x:T,y:P}}else if(E===s&&_===4){const T=n.fromBytes(L.subarray(0,n.BYTES)),$=n.fromBytes(L.subarray(n.BYTES,2*n.BYTES));return{x:T,y:$}}else throw new Error(`Point of length ${E} was invalid. Expected ${o} compressed bytes or ${s} uncompressed bytes`)}}),g=b=>Ne(Ee(b,t.nByteLength));function y(b){const E=r>>J;return b>E}function d(b){return y(b)?a(-b):b}const p=(b,E,_)=>F(b.slice(E,_));class w{constructor(E,_,L){this.r=E,this.s=_,this.recovery=L,this.assertValidity()}static fromCompact(E){const _=t.nByteLength;return E=K("compactSignature",E,_*2),new w(p(E,0,_),p(E,_,2*_))}static fromDER(E){const{r:_,s:L}=Se.toSig(K("DER",E));return new w(_,L)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(E){return new w(this.r,this.s,E)}recoverPublicKey(E){const{r:_,s:L,recovery:T}=this,$=x(K("msgHash",E));if(T==null||![0,1,2,3].includes(T))throw new Error("recovery id invalid");const P=T===2||T===3?_+t.n:_;if(P>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const N=T&1?"03":"02",Y=l.fromHex(N+g(P)),fe=c(P),Ie=a(-$*fe),je=a(L*fe),he=l.BASE.multiplyAndAddUnsafe(Y,Ie,je);if(!he)throw new Error("point at infinify");return he.assertValidity(),he}hasHighS(){return y(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Oe(this.toDERHex())}toDERHex(){return Se.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Oe(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}const m={isValidPrivateKey(b){try{return f(b),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const b=Vn(t.n);return rs(t.randomBytes(b),t.n)},precompute(b=8,E=l.BASE){return E._setWindowSize(b),E.multiply(BigInt(3)),E}};function S(b,E=!0){return l.fromPrivateKey(b).toRawBytes(E)}function U(b){const E=b instanceof Uint8Array,_=typeof b=="string",L=(E||_)&&b.length;return E?L===o||L===s:_?L===2*o||L===2*s:b instanceof l}function k(b,E,_=!0){if(U(b))throw new Error("first arg must be private key");if(!U(E))throw new Error("second arg must be public key");return l.fromHex(E).multiply(f(b)).toRawBytes(_)}const v=t.bits2int||function(b){const E=F(b),_=b.length*8-t.nBitLength;return _>0?E>>BigInt(_):E},x=t.bits2int_modN||function(b){return a(v(b))},A=Gt(t.nBitLength);function M(b){if(typeof b!="bigint")throw new Error("bigint expected");if(!(se<=b&&b<A))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Ee(b,t.nByteLength)}function R(b,E,_=B){if(["recovered","canonical"].some(xe=>xe in _))throw new Error("sign() legacy options not supported");const{hash:L,randomBytes:T}=t;let{lowS:$,prehash:P,extraEntropy:N}=_;$==null&&($=!0),b=K("msgHash",b),P&&(b=K("prehashed msgHash",L(b)));const Y=x(b),fe=f(E),Ie=[M(fe),M(Y)];if(N!=null){const xe=N===!0?T(n.BYTES):N;Ie.push(K("extraEntropy",xe))}const je=Be(...Ie),he=Y;function mt(xe){const Te=v(xe);if(!h(Te))return;const pn=c(Te),ke=l.BASE.multiply(Te).toAffine(),X=a(ke.x);if(X===se)return;const Le=a(pn*a(he+X*fe));if(Le===se)return;let gn=(ke.x===X?0:2)|Number(ke.y&J),yn=Le;return $&&y(Le)&&(yn=d(Le),gn^=1),new w(X,yn,gn)}return{seed:je,k2sig:mt}}const B={lowS:t.lowS,prehash:!1},O={lowS:t.lowS,prehash:!1};function H(b,E,_=B){const{seed:L,k2sig:T}=R(b,E,_),$=t;return qn($.hash.outputLen,$.nByteLength,$.hmac)(L,T)}l.BASE._setWindowSize(8);function q(b,E,_,L=O){var ke;const T=b;if(E=K("msgHash",E),_=K("publicKey",_),"strict"in L)throw new Error("options.strict was renamed to lowS");const{lowS:$,prehash:P}=L;let N,Y;try{if(typeof T=="string"||T instanceof Uint8Array)try{N=w.fromDER(T)}catch(X){if(!(X instanceof Se.Err))throw X;N=w.fromCompact(T)}else if(typeof T=="object"&&typeof T.r=="bigint"&&typeof T.s=="bigint"){const{r:X,s:Le}=T;N=new w(X,Le)}else throw new Error("PARSE");Y=l.fromHex(_)}catch(X){if(X.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if($&&N.hasHighS())return!1;P&&(E=t.hash(E));const{r:fe,s:Ie}=N,je=x(E),he=c(Ie),mt=a(je*he),xe=a(fe*he),Te=(ke=l.BASE.multiplyAndAddUnsafe(Y,mt,xe))==null?void 0:ke.toAffine();return Te?a(Te.x)===fe:!1}return{CURVE:t,getPublicKey:S,getSharedSecret:k,sign:H,verify:q,ProjectivePoint:l,Signature:w,utils:m}}let Kn=class extends On{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Bo(t);const r=Kt(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,s=new Uint8Array(o);s.set(r.length>o?t.create().update(r).digest():r);for(let i=0;i<s.length;i++)s[i]^=54;this.iHash.update(s),this.oHash=t.create();for(let i=0;i<s.length;i++)s[i]^=106;this.oHash.update(s),s.fill(0)}update(t){return et(this),this.iHash.update(t),this}digestInto(t){et(this),Cn(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:s,blockLen:i,outputLen:a}=this;return t=t,t.finished=o,t.destroyed=s,t.blockLen=i,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Wn=(e,t,n)=>new Kn(e,t).update(n).digest();Wn.create=(e,t)=>new Kn(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function hs(e){return{hash:e,hmac:(t,...n)=>Wn(e,t,Lo(...n)),randomBytes:Hn}}function ds(e,t){const n=r=>fs({...e,...hs(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ct=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),tt=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Zn=BigInt(1),nt=BigInt(2),An=(e,t)=>(e+t/nt)/t;function Fn(e){const t=ct,n=BigInt(3),r=BigInt(6),o=BigInt(11),s=BigInt(22),i=BigInt(23),a=BigInt(44),c=BigInt(88),l=e*e*e%t,f=l*l*e%t,u=G(f,n,t)*f%t,h=G(u,n,t)*f%t,g=G(h,nt,t)*l%t,y=G(g,o,t)*g%t,d=G(y,s,t)*y%t,p=G(d,a,t)*d%t,w=G(p,c,t)*p%t,m=G(w,a,t)*d%t,S=G(m,n,t)*f%t,U=G(S,i,t)*y%t,k=G(U,r,t)*l%t,v=G(k,nt,t);if(!Ct.eql(Ct.sqr(v),e))throw new Error("Cannot find square root");return v}const Ct=ns(ct,void 0,void 0,{sqrt:Fn}),Me=ds({a:BigInt(0),b:BigInt(7),Fp:Ct,n:tt,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=tt,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Zn*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,i=BigInt("0x100000000000000000000000000000000"),a=An(s*e,t),c=An(-r*e,t);let l=z(e-a*n-c*o,t),f=z(-a*r-c*s,t);const u=l>i,h=f>i;if(u&&(l=t-l),h&&(f=t-f),l>i||f>i)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:u,k1:l,k2neg:h,k2:f}}}},Rt),at=BigInt(0),Gn=e=>typeof e=="bigint"&&at<e&&e<ct,ps=e=>typeof e=="bigint"&&at<e&&e<tt,_n={};function rt(e,...t){let n=_n[e];if(n===void 0){const r=Rt(Uint8Array.from(e,o=>o.charCodeAt(0)));n=Be(r,r),_n[e]=n}return Rt(Be(n,...t))}const Jt=e=>e.toRawBytes(!0).slice(1),Nt=e=>Ee(e,32),St=e=>z(e,ct),Ke=e=>z(e,tt),Yt=Me.ProjectivePoint,gs=(e,t,n)=>Yt.BASE.multiplyAndAddUnsafe(e,t,n);function Ot(e){let t=Me.utils.normPrivateKeyToScalar(e),n=Yt.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:Ke(-t),bytes:Jt(n)}}function Jn(e){if(!Gn(e))throw new Error("bad x: need 0 < x < p");const t=St(e*e),n=St(t*e+BigInt(7));let r=Fn(n);r%nt!==at&&(r=St(-r));const o=new Yt(e,r,Zn);return o.assertValidity(),o}function Yn(...e){return Ke(F(rt("BIP0340/challenge",...e)))}function ys(e){return Ot(e).bytes}function ws(e,t,n=Hn(32)){const r=K("message",e),{bytes:o,scalar:s}=Ot(t),i=K("auxRand",n,32),a=Nt(s^F(rt("BIP0340/aux",i))),c=rt("BIP0340/nonce",a,o,r),l=Ke(F(c));if(l===at)throw new Error("sign failed: k is zero");const{bytes:f,scalar:u}=Ot(l),h=Yn(f,o,r),g=new Uint8Array(64);if(g.set(f,0),g.set(Nt(Ke(u+h*s)),32),!Xn(g,r,o))throw new Error("sign: Invalid signature produced");return g}function Xn(e,t,n){const r=K("signature",e,64),o=K("message",t),s=K("publicKey",n,32);try{const i=Jn(F(s)),a=F(r.subarray(0,32));if(!Gn(a))return!1;const c=F(r.subarray(32,64));if(!ps(c))return!1;const l=Yn(Nt(a),Jt(i),o),f=gs(i,c,Ke(-l));return!(!f||!f.hasEvenY()||f.toAffine().x!==a)}catch{return!1}}const De={getPublicKey:ys,sign:ws,verify:Xn,utils:{randomPrivateKey:Me.utils.randomPrivateKey,lift_x:Jn,pointToBytes:Jt,numberToBytesBE:Ee,bytesToNumberBE:F,taggedHash:rt,mod:z}},Bt=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xt=e=>e instanceof Uint8Array,It=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),te=(e,t)=>e<<32-t|e>>>t,bs=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!bs)throw new Error("Non little-endian hardware is not supported");const Es=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Z(e){if(!Xt(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=Es[e[n]];return t}function He(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const o=r*2,s=e.slice(o,o+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[r]=i}return n}function ms(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function We(e){if(typeof e=="string"&&(e=ms(e)),!Xt(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function lt(...e){const t=new Uint8Array(e.reduce((r,o)=>r+o.length,0));let n=0;return e.forEach(r=>{if(!Xt(r))throw new Error("Uint8Array expected");t.set(r,n),n+=r.length}),t}class Qn{clone(){return this._cloneInto()}}function er(e){const t=r=>e().update(We(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function tr(e=32){if(Bt&&typeof Bt.getRandomValues=="function")return Bt.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function Ht(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function vs(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function nr(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function xs(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ht(e.outputLen),Ht(e.blockLen)}function As(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function _s(e,t){nr(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const re={number:Ht,bool:vs,bytes:nr,hash:xs,exists:As,output:_s};function Ss(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),s=BigInt(4294967295),i=Number(n>>o&s),a=Number(n&s),c=r?4:0,l=r?0:4;e.setUint32(t+c,i,r),e.setUint32(t+l,a,r)}class Bs extends Qn{constructor(t,n,r,o){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=It(this.buffer)}update(t){re.exists(this);const{view:n,buffer:r,blockLen:o}=this;t=We(t);const s=t.length;for(let i=0;i<s;){const a=Math.min(o-this.pos,s-i);if(a===o){const c=It(t);for(;o<=s-i;i+=o)this.process(c,i);continue}r.set(t.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){re.exists(this),re.output(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:s}=this;let{pos:i}=this;n[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>o-i&&(this.process(r,0),i=0);for(let u=i;u<o;u++)n[u]=0;Ss(r,o-8,BigInt(this.length*8),s),this.process(r,0);const a=It(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,f=this.get();if(l>f.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<l;u++)a.setUint32(4*u,f[u],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:s,destroyed:i,pos:a}=this;return t.length=o,t.pos=a,t.finished=s,t.destroyed=i,o%n&&t.buffer.set(r),t}}const Is=(e,t,n)=>e&t^~e&n,Ts=(e,t,n)=>e&t^e&n^t&n,ks=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ge=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ye=new Uint32Array(64);class rr extends Bs{constructor(){super(64,32,8,!1),this.A=ge[0]|0,this.B=ge[1]|0,this.C=ge[2]|0,this.D=ge[3]|0,this.E=ge[4]|0,this.F=ge[5]|0,this.G=ge[6]|0,this.H=ge[7]|0}get(){const{A:t,B:n,C:r,D:o,E:s,F:i,G:a,H:c}=this;return[t,n,r,o,s,i,a,c]}set(t,n,r,o,s,i,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=o|0,this.E=s|0,this.F=i|0,this.G=a|0,this.H=c|0}process(t,n){for(let u=0;u<16;u++,n+=4)ye[u]=t.getUint32(n,!1);for(let u=16;u<64;u++){const h=ye[u-15],g=ye[u-2],y=te(h,7)^te(h,18)^h>>>3,d=te(g,17)^te(g,19)^g>>>10;ye[u]=d+ye[u-7]+y+ye[u-16]|0}let{A:r,B:o,C:s,D:i,E:a,F:c,G:l,H:f}=this;for(let u=0;u<64;u++){const h=te(a,6)^te(a,11)^te(a,25),g=f+h+Is(a,c,l)+ks[u]+ye[u]|0,d=(te(r,2)^te(r,13)^te(r,22))+Ts(r,o,s)|0;f=l,l=c,c=a,a=i+g|0,i=s,s=o,o=r,r=g+d|0}r=r+this.A|0,o=o+this.B|0,s=s+this.C|0,i=i+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,f=f+this.H|0,this.set(r,o,s,i,a,c,l,f)}roundClean(){ye.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Ls extends rr{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Fe=er(()=>new rr);er(()=>new Ls);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function qe(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function ae(...e){const t=(o,s)=>i=>o(s(i)),n=Array.from(e).reverse().reduce((o,s)=>o?t(o,s.encode):s.encode,void 0),r=e.reduce((o,s)=>o?t(o,s.decode):s.decode,void 0);return{encode:n,decode:r}}function le(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(n=>{if(qe(n),n<0||n>=e.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${e.length})`);return e[n]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=e.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${e}`);return r})}}}function ue(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let n of t)if(typeof n!="string")throw new Error(`join.encode: non-string input=${n}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function ut(e,t="="){if(qe(e),typeof t!="string")throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let r of n)if(typeof r!="string")throw new Error(`padding.encode: non-string input=${r}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&typeof n[0]!="string")throw new Error("padding.encode input should be array of strings");for(let o of n)if(typeof o!="string")throw new Error(`padding.decode: non-string input=${o}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function or(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function Sn(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let r=0;const o=[],s=Array.from(e);for(s.forEach(i=>{if(qe(i),i<0||i>=t)throw new Error(`Wrong integer: ${i}`)});;){let i=0,a=!0;for(let c=r;c<s.length;c++){const l=s[c],f=t*i+l;if(!Number.isSafeInteger(f)||t*i/t!==i||f-l!==t*i)throw new Error("convertRadix: carry overflow");if(i=f%n,s[c]=Math.floor(f/n),!Number.isSafeInteger(s[c])||s[c]*n+i!==f)throw new Error("convertRadix: carry overflow");if(a)s[c]?a=!1:r=c;else continue}if(o.push(i),a)break}for(let i=0;i<e.length-1&&e[i]===0;i++)o.push(0);return o.reverse()}const sr=(e,t)=>t?sr(t,e%t):e,ot=(e,t)=>e+(t-sr(e,t));function Pt(e,t,n,r){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(ot(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${ot(t,n)}`);let o=0,s=0;const i=2**n-1,a=[];for(const c of e){if(qe(c),c>=2**t)throw new Error(`convertRadix2: invalid data word=${c} from=${t}`);if(o=o<<t|c,s+t>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${t}`);for(s+=t;s>=n;s-=n)a.push((o>>s-n&i)>>>0);o&=2**s-1}if(o=o<<n-s&i,!r&&s>=t)throw new Error("Excess padding");if(!r&&o)throw new Error(`Non-zero padding: ${o}`);return r&&s>0&&a.push(o>>>0),a}function Rs(e){return qe(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return Sn(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(Sn(t,e,2**8))}}}function me(e,t=!1){if(qe(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(ot(8,e)>32||ot(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!(n instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Pt(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&typeof n[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Pt(n,e,8,t))}}}function Bn(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}const Us=ae(me(4),le("0123456789ABCDEF"),ue("")),$s=ae(me(5),le("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),ut(5),ue(""));ae(me(5),le("0123456789ABCDEFGHIJKLMNOPQRSTUV"),ut(5),ue(""));ae(me(5),le("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),ue(""),or(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const ce=ae(me(6),le("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),ut(6),ue("")),Cs=ae(me(6),le("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),ut(6),ue("")),Qt=e=>ae(Rs(58),le(e),ue("")),Mt=Qt("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");Qt("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");Qt("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const In=[0,2,3,5,6,7,9,10,11],Ns={encode(e){let t="";for(let n=0;n<e.length;n+=8){const r=e.subarray(n,n+8);t+=Mt.encode(r).padStart(In[r.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){const r=e.slice(n,n+11),o=In.indexOf(r.length),s=Mt.decode(r);for(let i=0;i<s.length-o;i++)if(s[i]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(s.slice(s.length-o)))}return Uint8Array.from(t)}},qt=ae(le("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),ue("")),Tn=[996825010,642813549,513874426,1027748829,705979059];function Ve(e){const t=e>>25;let n=(e&33554431)<<5;for(let r=0;r<Tn.length;r++)(t>>r&1)===1&&(n^=Tn[r]);return n}function kn(e,t,n=1){const r=e.length;let o=1;for(let s=0;s<r;s++){const i=e.charCodeAt(s);if(i<33||i>126)throw new Error(`Invalid prefix (${e})`);o=Ve(o)^i>>5}o=Ve(o);for(let s=0;s<r;s++)o=Ve(o)^e.charCodeAt(s)&31;for(let s of t)o=Ve(o)^s;for(let s=0;s<6;s++)o=Ve(o);return o^=n,qt.encode(Pt([o%2**30],30,5,!1))}function ir(e){const t=e==="bech32"?1:734539939,n=me(5),r=n.decode,o=n.encode,s=Bn(r);function i(f,u,h=90){if(typeof f!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof f}`);if(!Array.isArray(u)||u.length&&typeof u[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof u}`);const g=f.length+7+u.length;if(h!==!1&&g>h)throw new TypeError(`Length ${g} exceeds limit ${h}`);return f=f.toLowerCase(),`${f}1${qt.encode(u)}${kn(f,u,t)}`}function a(f,u=90){if(typeof f!="string")throw new Error(`bech32.decode input should be string, not ${typeof f}`);if(f.length<8||u!==!1&&f.length>u)throw new TypeError(`Wrong string length: ${f.length} (${f}). Expected (8..${u})`);const h=f.toLowerCase();if(f!==h&&f!==f.toUpperCase())throw new Error("String must be lowercase or uppercase");f=h;const g=f.lastIndexOf("1");if(g===0||g===-1)throw new Error('Letter "1" must be present between prefix and data only');const y=f.slice(0,g),d=f.slice(g+1);if(d.length<6)throw new Error("Data must be at least 6 characters long");const p=qt.decode(d).slice(0,-6),w=kn(y,p,t);if(!d.endsWith(w))throw new Error(`Invalid checksum in ${f}: expected "${w}"`);return{prefix:y,words:p}}const c=Bn(a);function l(f){const{prefix:u,words:h}=a(f,!1);return{prefix:u,words:h,bytes:r(h)}}return{encode:i,decode:a,decodeToBytes:l,decodeUnsafe:c,fromWords:r,fromWordsUnsafe:s,toWords:o}}const Pe=ir("bech32");ir("bech32m");const Os={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},Hs=ae(me(4),le("0123456789abcdef"),ue(""),or(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),Ps={utf8:Os,hex:Hs,base16:Us,base32:$s,base64:ce,base64url:Cs,base58:Mt,base58xmr:Ns};`${Object.keys(Ps).join(", ")}`;function Tt(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function Ln(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}function Ms(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function ie(e,...t){if(!Ms(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const W=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),qs=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!qs)throw new Error("Non little-endian hardware is not supported");function js(e,t){if(t==null||typeof t!="object")throw new Error("options must be defined");return Object.assign(e,t)}function Ds(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}const Vs=(e,t)=>(Object.assign(t,e),t),be=16,zs=283;function en(e){return e<<1^zs&-(e>>7)}function Re(e,t){let n=0;for(;t>0;t>>=1)n^=e&-(t&1),e=en(e);return n}const jt=(()=>{let e=new Uint8Array(256);for(let n=0,r=1;n<256;n++,r^=en(r))e[n]=r;const t=new Uint8Array(256);t[0]=99;for(let n=0;n<255;n++){let r=e[255-n];r|=r<<8,t[e[n]]=(r^r>>4^r>>5^r>>6^r>>7^99)&255}return t})(),Ks=jt.map((e,t)=>jt.indexOf(t)),Ws=e=>e<<24|e>>>8,kt=e=>e<<8|e>>>24;function cr(e,t){if(e.length!==256)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map((l,f)=>t(e[f])),r=n.map(kt),o=r.map(kt),s=o.map(kt),i=new Uint32Array(256*256),a=new Uint32Array(256*256),c=new Uint16Array(256*256);for(let l=0;l<256;l++)for(let f=0;f<256;f++){const u=l*256+f;i[u]=n[l]^r[f],a[u]=o[l]^s[f],c[u]=e[l]<<8|e[f]}return{sbox:e,sbox2:c,T0:n,T1:r,T2:o,T3:s,T01:i,T23:a}}const tn=cr(jt,e=>Re(e,3)<<24|e<<16|e<<8|Re(e,2)),ar=cr(Ks,e=>Re(e,11)<<24|Re(e,13)<<16|Re(e,9)<<8|Re(e,14)),Zs=(()=>{const e=new Uint8Array(16);for(let t=0,n=1;t<16;t++,n=en(n))e[t]=n;return e})();function lr(e){ie(e);const t=e.length;if(![16,24,32].includes(t))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${t}`);const{sbox2:n}=tn,r=W(e),o=r.length,s=a=>oe(n,a,a,a,a),i=new Uint32Array(t+28);i.set(r);for(let a=o;a<i.length;a++){let c=i[a-1];a%o===0?c=s(Ws(c))^Zs[a/o-1]:o>6&&a%o===4&&(c=s(c)),i[a]=i[a-o]^c}return i}function Fs(e){const t=lr(e),n=t.slice(),r=t.length,{sbox2:o}=tn,{T0:s,T1:i,T2:a,T3:c}=ar;for(let l=0;l<r;l+=4)for(let f=0;f<4;f++)n[l+f]=t[r-l-4+f];t.fill(0);for(let l=4;l<r-4;l++){const f=n[l],u=oe(o,f,f,f,f);n[l]=s[u&255]^i[u>>>8&255]^a[u>>>16&255]^c[u>>>24]}return n}function we(e,t,n,r,o,s){return e[n<<8&65280|r>>>8&255]^t[o>>>8&65280|s>>>24&255]}function oe(e,t,n,r,o){return e[t&255|n&65280]|e[r>>>16&255|o>>>16&65280]<<16}function Rn(e,t,n,r,o){const{sbox2:s,T01:i,T23:a}=tn;let c=0;t^=e[c++],n^=e[c++],r^=e[c++],o^=e[c++];const l=e.length/4-2;for(let y=0;y<l;y++){const d=e[c++]^we(i,a,t,n,r,o),p=e[c++]^we(i,a,n,r,o,t),w=e[c++]^we(i,a,r,o,t,n),m=e[c++]^we(i,a,o,t,n,r);t=d,n=p,r=w,o=m}const f=e[c++]^oe(s,t,n,r,o),u=e[c++]^oe(s,n,r,o,t),h=e[c++]^oe(s,r,o,t,n),g=e[c++]^oe(s,o,t,n,r);return{s0:f,s1:u,s2:h,s3:g}}function Gs(e,t,n,r,o){const{sbox2:s,T01:i,T23:a}=ar;let c=0;t^=e[c++],n^=e[c++],r^=e[c++],o^=e[c++];const l=e.length/4-2;for(let y=0;y<l;y++){const d=e[c++]^we(i,a,t,o,r,n),p=e[c++]^we(i,a,n,t,o,r),w=e[c++]^we(i,a,r,n,t,o),m=e[c++]^we(i,a,o,r,n,t);t=d,n=p,r=w,o=m}const f=e[c++]^oe(s,t,o,r,n),u=e[c++]^oe(s,n,t,o,r),h=e[c++]^oe(s,r,n,t,o),g=e[c++]^oe(s,o,r,n,t);return{s0:f,s1:u,s2:h,s3:g}}function ur(e,t){if(!t)return new Uint8Array(e);if(ie(t),t.length<e)throw new Error(`aes: wrong destination length, expected at least ${e}, got: ${t.length}`);return t}function Js(e){if(ie(e),e.length%be!==0)throw new Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${be}`)}function Ys(e,t,n){let r=e.length;const o=r%be;if(!t&&o!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const s=W(e);if(t){let c=be-o;c||(c=be),r=r+c}const i=ur(r,n),a=W(i);return{b:s,o:a,out:i}}function Xs(e,t){if(!t)return e;const n=e.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=e[n-1];if(r<=0||r>16)throw new Error(`aes/pcks5: wrong padding byte: ${r}`);const o=e.subarray(0,-r);for(let s=0;s<r;s++)if(e[n-s-1]!==r)throw new Error("aes/pcks5: wrong padding");return o}function Qs(e){const t=new Uint8Array(16),n=W(t);t.set(e);const r=be-e.length;for(let o=be-r;o<be;o++)t[o]=r;return n}const fr=Vs({blockSize:16,nonceLength:16},function(t,n,r={}){ie(t),ie(n,16);const o=!r.disablePadding;return{encrypt:(s,i)=>{const a=lr(t),{b:c,o:l,out:f}=Ys(s,o,i),u=W(n);let h=u[0],g=u[1],y=u[2],d=u[3],p=0;for(;p+4<=c.length;)h^=c[p+0],g^=c[p+1],y^=c[p+2],d^=c[p+3],{s0:h,s1:g,s2:y,s3:d}=Rn(a,h,g,y,d),l[p++]=h,l[p++]=g,l[p++]=y,l[p++]=d;if(o){const w=Qs(s.subarray(p*4));h^=w[0],g^=w[1],y^=w[2],d^=w[3],{s0:h,s1:g,s2:y,s3:d}=Rn(a,h,g,y,d),l[p++]=h,l[p++]=g,l[p++]=y,l[p++]=d}return a.fill(0),f},decrypt:(s,i)=>{Js(s);const a=Fs(t),c=W(n),l=ur(s.length,i),f=W(s),u=W(l);let h=c[0],g=c[1],y=c[2],d=c[3];for(let p=0;p+4<=f.length;){const w=h,m=g,S=y,U=d;h=f[p+0],g=f[p+1],y=f[p+2],d=f[p+3];const{s0:k,s1:v,s2:x,s3:A}=Gs(a,h,g,y,d);u[p++]=k^w,u[p++]=v^m,u[p++]=x^S,u[p++]=A^U}return a.fill(0),Xs(l,o)}}}),hr=e=>Uint8Array.from(e.split("").map(t=>t.charCodeAt(0))),ei=hr("expand 16-byte k"),ti=hr("expand 32-byte k"),ni=W(ei),dr=W(ti);dr.slice();function C(e,t){return e<<t|e>>>32-t}function Dt(e){return e.byteOffset%4===0}const Ye=64,ri=16,pr=2**32-1,Un=new Uint32Array;function oi(e,t,n,r,o,s,i,a){const c=o.length,l=new Uint8Array(Ye),f=W(l),u=Dt(o)&&Dt(s),h=u?W(o):Un,g=u?W(s):Un;for(let y=0;y<c;i++){if(e(t,n,r,f,i,a),i>=pr)throw new Error("arx: counter overflow");const d=Math.min(Ye,c-y);if(u&&d===Ye){const p=y/4;if(y%4!==0)throw new Error("arx: invalid block position");for(let w=0,m;w<ri;w++)m=p+w,g[m]=h[m]^f[w];y+=Ye;continue}for(let p=0,w;p<d;p++)w=y+p,s[w]=o[w]^l[p];y+=d}}function si(e,t){const{allowShortKeys:n,extendNonceFn:r,counterLength:o,counterRight:s,rounds:i}=js({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if(typeof e!="function")throw new Error("core must be a function");return Tt(o),Tt(i),Ln(s),Ln(n),(a,c,l,f,u=0)=>{ie(a),ie(c),ie(l);const h=l.length;if(f||(f=new Uint8Array(h)),ie(f),Tt(u),u<0||u>=pr)throw new Error("arx: counter overflow");if(f.length<h)throw new Error(`arx: output (${f.length}) is shorter than data (${h})`);const g=[];let y=a.length,d,p;if(y===32)d=a.slice(),g.push(d),p=dr;else if(y===16&&n)d=new Uint8Array(32),d.set(a),d.set(a,16),p=ni,g.push(d);else throw new Error(`arx: invalid 32-byte key, got length=${y}`);Dt(c)||(c=c.slice(),g.push(c));const w=W(d);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(p,w,W(c.subarray(0,16)),w),c=c.subarray(16)}const m=16-o;if(m!==c.length)throw new Error(`arx: nonce must be ${m} or 16 bytes`);if(m!==12){const U=new Uint8Array(12);U.set(c,s?0:12-c.length),c=U,g.push(c)}const S=W(c);for(oi(e,p,w,S,l,f,u,i);g.length>0;)g.pop().fill(0);return f}}function ii(e,t,n,r,o,s=20){let i=e[0],a=e[1],c=e[2],l=e[3],f=t[0],u=t[1],h=t[2],g=t[3],y=t[4],d=t[5],p=t[6],w=t[7],m=o,S=n[0],U=n[1],k=n[2],v=i,x=a,A=c,M=l,R=f,B=u,O=h,H=g,q=y,b=d,E=p,_=w,L=m,T=S,$=U,P=k;for(let Y=0;Y<s;Y+=2)v=v+R|0,L=C(L^v,16),q=q+L|0,R=C(R^q,12),v=v+R|0,L=C(L^v,8),q=q+L|0,R=C(R^q,7),x=x+B|0,T=C(T^x,16),b=b+T|0,B=C(B^b,12),x=x+B|0,T=C(T^x,8),b=b+T|0,B=C(B^b,7),A=A+O|0,$=C($^A,16),E=E+$|0,O=C(O^E,12),A=A+O|0,$=C($^A,8),E=E+$|0,O=C(O^E,7),M=M+H|0,P=C(P^M,16),_=_+P|0,H=C(H^_,12),M=M+H|0,P=C(P^M,8),_=_+P|0,H=C(H^_,7),v=v+B|0,P=C(P^v,16),E=E+P|0,B=C(B^E,12),v=v+B|0,P=C(P^v,8),E=E+P|0,B=C(B^E,7),x=x+O|0,L=C(L^x,16),_=_+L|0,O=C(O^_,12),x=x+O|0,L=C(L^x,8),_=_+L|0,O=C(O^_,7),A=A+H|0,T=C(T^A,16),q=q+T|0,H=C(H^q,12),A=A+H|0,T=C(T^A,8),q=q+T|0,H=C(H^q,7),M=M+R|0,$=C($^M,16),b=b+$|0,R=C(R^b,12),M=M+R|0,$=C($^M,8),b=b+$|0,R=C(R^b,7);let N=0;r[N++]=i+v|0,r[N++]=a+x|0,r[N++]=c+A|0,r[N++]=l+M|0,r[N++]=f+R|0,r[N++]=u+B|0,r[N++]=h+O|0,r[N++]=g+H|0,r[N++]=y+q|0,r[N++]=d+b|0,r[N++]=p+E|0,r[N++]=w+_|0,r[N++]=m+L|0,r[N++]=S+T|0,r[N++]=U+$|0,r[N++]=k+P|0}const gr=si(ii,{counterRight:!1,counterLength:4,allowShortKeys:!1});class yr extends Qn{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,re.hash(t);const r=We(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,s=new Uint8Array(o);s.set(r.length>o?t.create().update(r).digest():r);for(let i=0;i<s.length;i++)s[i]^=54;this.iHash.update(s),this.oHash=t.create();for(let i=0;i<s.length;i++)s[i]^=106;this.oHash.update(s),s.fill(0)}update(t){return re.exists(this),this.iHash.update(t),this}digestInto(t){re.exists(this),re.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:o,destroyed:s,blockLen:i,outputLen:a}=this;return t=t,t.finished=o,t.destroyed=s,t.blockLen=i,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ft=(e,t,n)=>new yr(e,t).update(n).digest();ft.create=(e,t)=>new yr(e,t);function ci(e,t,n){return re.hash(e),ft(e,We(n),We(t))}const Lt=new Uint8Array([0]),$n=new Uint8Array;function ai(e,t,n,r=32){if(re.hash(e),re.number(r),r>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const o=Math.ceil(r/e.outputLen);n===void 0&&(n=$n);const s=new Uint8Array(o*e.outputLen),i=ft.create(e,t),a=i._cloneInto(),c=new Uint8Array(i.outputLen);for(let l=0;l<o;l++)Lt[0]=l+1,a.update(l===0?$n:c).update(n).update(Lt).digestInto(c),s.set(c,e.outputLen*l),i._cloneInto(a);return i.destroy(),a.destroy(),c.fill(0),Lt.fill(0),s.slice(0,r)}var li=Object.defineProperty,D=(e,t)=>{for(var n in t)li(e,n,{get:t[n],enumerable:!0})},Ae=Symbol("verified"),ui=e=>e instanceof Object;function wr(e){if(!ui(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let n=e.tags[t];if(!Array.isArray(n))return!1;for(let r=0;r<n.length;r++)if(typeof n[r]=="object")return!1}return!0}var fi={};D(fi,{Queue:()=>Er,QueueNode:()=>br,binarySearch:()=>nn,insertEventIntoAscendingList:()=>di,insertEventIntoDescendingList:()=>hi,normalizeURL:()=>Ue,utf8Decoder:()=>ne,utf8Encoder:()=>Q});var ne=new TextDecoder("utf-8"),Q=new TextEncoder;function Ue(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}function hi(e,t){const[n,r]=nn(e,o=>t.id===o.id?0:t.created_at===o.created_at?-1:o.created_at-t.created_at);return r||e.splice(n,0,t),e}function di(e,t){const[n,r]=nn(e,o=>t.id===o.id?0:t.created_at===o.created_at?-1:t.created_at-o.created_at);return r||e.splice(n,0,t),e}function nn(e,t){let n=0,r=e.length-1;for(;n<=r;){const o=Math.floor((n+r)/2),s=t(e[o]);if(s===0)return[o,!0];s<0?r=o-1:n=o+1}return[n,!1]}var br=class{constructor(e){I(this,"value");I(this,"next",null);I(this,"prev",null);this.value=e}},Er=class{constructor(){I(this,"first");I(this,"last");this.first=null,this.last=null}enqueue(e){const t=new br(e);return this.last?this.last===this.first?(this.last=t,this.last.prev=this.first,this.first.next=t):(t.prev=this.last,this.last.next=t,this.last=t):(this.first=t,this.last=t),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const t=this.first;return this.first=null,this.last=null,t.value}const e=this.first;return this.first=e.next,e.value}},pi=class{generateSecretKey(){return De.utils.randomPrivateKey()}getPublicKey(e){return Z(De.getPublicKey(e))}finalizeEvent(e,t){const n=e;return n.pubkey=Z(De.getPublicKey(t)),n.id=Qe(n),n.sig=Z(De.sign(Qe(n),t)),n[Ae]=!0,n}verifyEvent(e){if(typeof e[Ae]=="boolean")return e[Ae];const t=Qe(e);if(t!==e.id)return e[Ae]=!1,!1;try{const n=De.verify(e.sig,t,e.pubkey);return e[Ae]=n,n}catch{return e[Ae]=!1,!1}}};function gi(e){if(!wr(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function Qe(e){let t=Fe(Q.encode(gi(e)));return Z(t)}var ht=new pi;ht.generateSecretKey;ht.getPublicKey;var ve=ht.finalizeEvent,dt=ht.verifyEvent,yi={};D(yi,{Application:()=>yc,BadgeAward:()=>Si,BadgeDefinition:()=>lc,BlockedRelaysList:()=>Fi,BookmarkList:()=>Ki,Bookmarksets:()=>ic,Calendar:()=>Ac,CalendarEventRSVP:()=>_c,ChannelCreation:()=>_r,ChannelHideMessage:()=>Ir,ChannelMessage:()=>Br,ChannelMetadata:()=>Sr,ChannelMuteUser:()=>Tr,ClassifiedListing:()=>Ec,ClientAuth:()=>kr,CommunitiesList:()=>Wi,CommunityDefinition:()=>Ic,CommunityPostApproval:()=>Ci,Contacts:()=>vi,CreateOrUpdateProduct:()=>hc,CreateOrUpdateStall:()=>fc,Curationsets:()=>cc,Date:()=>vc,DraftClassifiedListing:()=>mc,DraftLong:()=>pc,Emojisets:()=>gc,EncryptedDirectMessage:()=>xi,EncryptedDirectMessages:()=>Ai,EventDeletion:()=>_i,FileMetadata:()=>Ti,FileServerPreference:()=>Xi,Followsets:()=>rc,GenericRepost:()=>Bi,Genericlists:()=>oc,HTTPAuth:()=>sn,Handlerinformation:()=>Bc,Handlerrecommendation:()=>Sc,Highlights:()=>ji,InterestsList:()=>Ji,Interestsets:()=>uc,JobFeedback:()=>Hi,JobRequest:()=>Ni,JobResult:()=>Oi,Label:()=>$i,LightningPubRPC:()=>ec,LiveChatMessage:()=>ki,LiveEvent:()=>wc,LongFormArticle:()=>dc,Metadata:()=>bi,Mutelist:()=>Di,NWCWalletInfo:()=>Qi,NWCWalletRequest:()=>Lr,NWCWalletResponse:()=>tc,NostrConnect:()=>nc,OpenTimestamps:()=>Ii,Pinlist:()=>Vi,ProblemTracker:()=>Li,ProfileBadges:()=>ac,PublicChatsList:()=>Zi,Reaction:()=>on,RecommendRelay:()=>mi,RelayList:()=>zi,Relaysets:()=>sc,Report:()=>Ri,Reporting:()=>Ui,Repost:()=>rn,SearchRelaysList:()=>Gi,ShortTextNote:()=>Ei,Time:()=>xc,UserEmojiList:()=>Yi,UserStatuses:()=>bc,Zap:()=>qi,ZapGoal:()=>Pi,ZapRequest:()=>Mi,classifyKind:()=>wi,isEphemeralKind:()=>xr,isParameterizedReplaceableKind:()=>Ar,isRegularKind:()=>mr,isReplaceableKind:()=>vr});function mr(e){return 1e3<=e&&e<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(e)}function vr(e){return[0,3].includes(e)||1e4<=e&&e<2e4}function xr(e){return 2e4<=e&&e<3e4}function Ar(e){return 3e4<=e&&e<4e4}function wi(e){return mr(e)?"regular":vr(e)?"replaceable":xr(e)?"ephemeral":Ar(e)?"parameterized":"unknown"}var bi=0,Ei=1,mi=2,vi=3,xi=4,Ai=4,_i=5,rn=6,on=7,Si=8,Bi=16,_r=40,Sr=41,Br=42,Ir=43,Tr=44,Ii=1040,Ti=1063,ki=1311,Li=1971,Ri=1984,Ui=1984,$i=1985,Ci=4550,Ni=5999,Oi=6999,Hi=7e3,Pi=9041,Mi=9734,qi=9735,ji=9802,Di=1e4,Vi=10001,zi=10002,Ki=10003,Wi=10004,Zi=10005,Fi=10006,Gi=10007,Ji=10015,Yi=10030,Xi=10096,Qi=13194,ec=21e3,kr=22242,Lr=23194,tc=23195,nc=24133,sn=27235,rc=3e4,oc=30001,sc=30002,ic=30003,cc=30004,ac=30008,lc=30009,uc=30015,fc=30017,hc=30018,dc=30023,pc=30024,gc=30030,yc=30078,wc=30311,bc=30315,Ec=30402,mc=30403,vc=31922,xc=31923,Ac=31924,_c=31925,Sc=31989,Bc=31990,Ic=34550;function Tc(e,t){if(e.ids&&e.ids.indexOf(t.id)===-1||e.kinds&&e.kinds.indexOf(t.kind)===-1||e.authors&&e.authors.indexOf(t.pubkey)===-1)return!1;for(let n in e)if(n[0]==="#"){let r=n.slice(1),o=e[`#${r}`];if(o&&!t.tags.find(([s,i])=>s===n.slice(1)&&o.indexOf(i)!==-1))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}function kc(e,t){for(let n=0;n<e.length;n++)if(Tc(e[n],t))return!0;return!1}var Lc={};D(Lc,{getHex64:()=>pt,getInt:()=>Rr,getSubscriptionId:()=>Ur,matchEventId:()=>Rc,matchEventKind:()=>$c,matchEventPubkey:()=>Uc});function pt(e,t){let n=t.length+3,r=e.indexOf(`"${t}":`)+n,o=e.slice(r).indexOf('"')+r+1;return e.slice(o,o+64)}function Rr(e,t){let n=t.length,r=e.indexOf(`"${t}":`)+n+3,o=e.slice(r),s=Math.min(o.indexOf(","),o.indexOf("}"));return parseInt(o.slice(0,s),10)}function Ur(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let n=e.slice(t+7+1).indexOf('"');if(n===-1)return null;let r=t+7+1+n,o=e.slice(r+1,80).indexOf('"');if(o===-1)return null;let s=r+1+o;return e.slice(r+1,s)}function Rc(e,t){return t===pt(e,"id")}function Uc(e,t){return t===pt(e,"pubkey")}function $c(e,t){return t===Rr(e,"kind")}var Cc={};D(Cc,{makeAuthEvent:()=>$r});function $r(e,t){return{kind:kr,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function Nc(){return new Promise(e=>{const t=new MessageChannel,n=()=>{t.port1.removeEventListener("message",n),e()};t.port1.addEventListener("message",n),t.port2.postMessage(0),t.port1.start()})}var Oc=e=>(e[Ae]=!0,!0),Cr=class{constructor(e,t){I(this,"url");I(this,"_connected",!1);I(this,"onclose",null);I(this,"onnotice",e=>console.debug(`NOTICE from ${this.url}: ${e}`));I(this,"_onauth",null);I(this,"baseEoseTimeout",4400);I(this,"connectionTimeout",4400);I(this,"openSubs",new Map);I(this,"connectionTimeoutHandle");I(this,"connectionPromise");I(this,"openCountRequests",new Map);I(this,"openEventPublishes",new Map);I(this,"ws");I(this,"incomingMessageQueue",new Er);I(this,"queueRunning",!1);I(this,"challenge");I(this,"serial",0);I(this,"verifyEvent");I(this,"_WebSocket");this.url=Ue(e),this.verifyEvent=t.verifyEvent,this._WebSocket=t.websocketImplementation||WebSocket}static async connect(e,t){const n=new Cr(e,t);return await n.connect(),n}closeAllSubscriptions(e){for(let[t,n]of this.openSubs)n.close(e);this.openSubs.clear();for(let[t,n]of this.openEventPublishes)n.reject(new Error(e));this.openEventPublishes.clear();for(let[t,n]of this.openCountRequests)n.reject(new Error(e));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((e,t)=>{this.connectionTimeoutHandle=setTimeout(()=>{var n;t("connection timed out"),this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new this._WebSocket(this.url)}catch(n){t(n);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,e()},this.ws.onerror=n=>{var r;t(n.message||"websocket error"),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var n;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await Nc();this.queueRunning=!1}handleNext(){var n,r,o;const e=this.incomingMessageQueue.dequeue();if(!e)return!1;const t=Ur(e);if(t){const s=this.openSubs.get(t);if(!s)return;const i=pt(e,"id"),a=(n=s.alreadyHaveEvent)==null?void 0:n.call(s,i);if((r=s.receivedEvent)==null||r.call(s,this,i),a)return}try{let s=JSON.parse(e);switch(s[0]){case"EVENT":{const i=this.openSubs.get(s[1]),a=s[2];this.verifyEvent(a)&&kc(i.filters,a)&&i.onevent(a);return}case"COUNT":{const i=s[1],a=s[2],c=this.openCountRequests.get(i);c&&(c.resolve(a.count),this.openCountRequests.delete(i));return}case"EOSE":{const i=this.openSubs.get(s[1]);if(!i)return;i.receivedEose();return}case"OK":{const i=s[1],a=s[2],c=s[3],l=this.openEventPublishes.get(i);a?l.resolve(c):l.reject(new Error(c)),this.openEventPublishes.delete(i);return}case"CLOSED":{const i=s[1],a=this.openSubs.get(i);if(!a)return;a.closed=!0,a.close(s[2]);return}case"NOTICE":this.onnotice(s[1]);return;case"AUTH":{this.challenge=s[1],(o=this._onauth)==null||o.call(this,s[1]);return}}}catch{return}}async send(e){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var t;(t=this.ws)==null||t.send(e)})}async auth(e){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");const t=await e($r(this.url,this.challenge)),n=new Promise((r,o)=>{this.openEventPublishes.set(t.id,{resolve:r,reject:o})});return this.send('["AUTH",'+JSON.stringify(t)+"]"),n}async publish(e){const t=new Promise((n,r)=>{this.openEventPublishes.set(e.id,{resolve:n,reject:r})});return this.send('["EVENT",'+JSON.stringify(e)+"]"),t}async count(e,t){this.serial++;const n=(t==null?void 0:t.id)||"count:"+this.serial,r=new Promise((o,s)=>{this.openCountRequests.set(n,{resolve:o,reject:s})});return this.send('["COUNT","'+n+'",'+JSON.stringify(e).substring(1)),r}subscribe(e,t){const n=this.prepareSubscription(e,t);return n.fire(),n}prepareSubscription(e,t){this.serial++;const n=t.id||"sub:"+this.serial,r=new Hc(this,n,e,t);return this.openSubs.set(n,r),r}close(){var e;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(e=this.ws)==null||e.close()}_onmessage(e){this.incomingMessageQueue.enqueue(e.data),this.queueRunning||this.runQueue()}},Hc=class{constructor(e,t,n,r){I(this,"relay");I(this,"id");I(this,"closed",!1);I(this,"eosed",!1);I(this,"filters");I(this,"alreadyHaveEvent");I(this,"receivedEvent");I(this,"onevent");I(this,"oneose");I(this,"onclose");I(this,"eoseTimeout");I(this,"eoseTimeoutHandle");this.relay=e,this.filters=n,this.id=t,this.alreadyHaveEvent=r.alreadyHaveEvent,this.receivedEvent=r.receivedEvent,this.eoseTimeout=r.eoseTimeout||e.baseEoseTimeout,this.oneose=r.oneose,this.onclose=r.onclose,this.onevent=r.onevent||(o=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,o)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var e;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(e=this.oneose)==null||e.call(this))}close(e="closed by caller"){var t;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(t=this.onclose)==null||t.call(this,e)}},Pc;try{Pc=WebSocket}catch{}var Mc=class{constructor(e){I(this,"relays",new Map);I(this,"seenOn",new Map);I(this,"trackRelays",!1);I(this,"verifyEvent");I(this,"trustedRelayURLs",new Set);I(this,"_WebSocket");this.verifyEvent=e.verifyEvent,this._WebSocket=e.websocketImplementation}async ensureRelay(e,t){e=Ue(e);let n=this.relays.get(e);return n||(n=new Cr(e,{verifyEvent:this.trustedRelayURLs.has(e)?Oc:this.verifyEvent,websocketImplementation:this._WebSocket}),t!=null&&t.connectionTimeout&&(n.connectionTimeout=t.connectionTimeout),this.relays.set(e,n)),await n.connect(),n}close(e){e.map(Ue).forEach(t=>{var n;(n=this.relays.get(t))==null||n.close()})}subscribeMany(e,t,n){return this.subscribeManyMap(Object.fromEntries(e.map(r=>[r,t])),n)}subscribeManyMap(e,t){this.trackRelays&&(t.receivedEvent=(u,h)=>{let g=this.seenOn.get(h);g||(g=new Set,this.seenOn.set(h,g)),g.add(u)});const n=new Set,r=[],o=Object.keys(e).length,s=[];let i=u=>{var h;s[u]=!0,s.filter(g=>g).length===o&&((h=t.oneose)==null||h.call(t),i=()=>{})};const a=[];let c=(u,h)=>{var g;i(u),a[u]=h,a.filter(y=>y).length===o&&((g=t.onclose)==null||g.call(t,a),c=()=>{})};const l=u=>{var g;if((g=t.alreadyHaveEvent)!=null&&g.call(t,u))return!0;const h=n.has(u);return n.add(u),h},f=Promise.all(Object.entries(e).map(async(u,h,g)=>{if(g.indexOf(u)!==h){c(h,"duplicate url");return}let[y,d]=u;y=Ue(y);let p;try{p=await this.ensureRelay(y,{connectionTimeout:t.maxWait?Math.max(t.maxWait*.8,t.maxWait-1e3):void 0})}catch(m){c(h,(m==null?void 0:m.message)||String(m));return}let w=p.subscribe(d,{...t,oneose:()=>i(h),onclose:m=>c(h,m),alreadyHaveEvent:l,eoseTimeout:t.maxWait});r.push(w)}));return{async close(){await f,r.forEach(u=>{u.close()})}}}subscribeManyEose(e,t,n){const r=this.subscribeMany(e,t,{...n,oneose(){r.close()}});return r}async querySync(e,t,n){return new Promise(async r=>{const o=[];this.subscribeManyEose(e,[t],{...n,onevent(s){o.push(s)},onclose(s){r(o)}})})}async get(e,t,n){t.limit=1;const r=await this.querySync(e,t,n);return r.sort((o,s)=>s.created_at-o.created_at),r[0]||null}publish(e,t){return e.map(Ue).map(async(n,r,o)=>o.indexOf(n)!==r?Promise.reject("duplicate url"):(await this.ensureRelay(n)).publish(t))}listConnectionStatus(){const e=new Map;return this.relays.forEach((t,n)=>e.set(n,t.connected)),e}destroy(){this.relays.forEach(e=>e.close()),this.relays=new Map}},Nr;try{Nr=WebSocket}catch{}var qc=class extends Mc{constructor(){super({verifyEvent:dt,websocketImplementation:Nr})}},jc={};D(jc,{BECH32_REGEX:()=>Or,Bech32MaxSize:()=>cn,decode:()=>gt,encodeBytes:()=>yt,naddrEncode:()=>Fc,neventEncode:()=>Zc,noteEncode:()=>Kc,nprofileEncode:()=>Wc,npubEncode:()=>zc,nrelayEncode:()=>Gc,nsecEncode:()=>Vc});var cn=5e3,Or=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function Dc(e){const t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=e&255,t}function gt(e){var o,s,i,a,c,l,f,u;let{prefix:t,words:n}=Pe.decode(e,cn),r=new Uint8Array(Pe.fromWords(n));switch(t){case"nprofile":{let h=Xe(r);if(!((o=h[0])!=null&&o[0]))throw new Error("missing TLV 0 for nprofile");if(h[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:Z(h[0][0]),relays:h[1]?h[1].map(g=>ne.decode(g)):[]}}}case"nevent":{let h=Xe(r);if(!((s=h[0])!=null&&s[0]))throw new Error("missing TLV 0 for nevent");if(h[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(h[2]&&h[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(h[3]&&h[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:Z(h[0][0]),relays:h[1]?h[1].map(g=>ne.decode(g)):[],author:(i=h[2])!=null&&i[0]?Z(h[2][0]):void 0,kind:(a=h[3])!=null&&a[0]?parseInt(Z(h[3][0]),16):void 0}}}case"naddr":{let h=Xe(r);if(!((c=h[0])!=null&&c[0]))throw new Error("missing TLV 0 for naddr");if(!((l=h[2])!=null&&l[0]))throw new Error("missing TLV 2 for naddr");if(h[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((f=h[3])!=null&&f[0]))throw new Error("missing TLV 3 for naddr");if(h[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:ne.decode(h[0][0]),pubkey:Z(h[2][0]),kind:parseInt(Z(h[3][0]),16),relays:h[1]?h[1].map(g=>ne.decode(g)):[]}}}case"nrelay":{let h=Xe(r);if(!((u=h[0])!=null&&u[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:ne.decode(h[0][0])}}case"nsec":return{type:t,data:r};case"npub":case"note":return{type:t,data:Z(r)};default:throw new Error(`unknown prefix ${t}`)}}function Xe(e){let t={},n=e;for(;n.length>0;){let r=n[0],o=n[1],s=n.slice(2,2+o);if(n=n.slice(2+o),s.length<o)throw new Error(`not enough data to read on TLV ${r}`);t[r]=t[r]||[],t[r].push(s)}return t}function Vc(e){return yt("nsec",e)}function zc(e){return yt("npub",He(e))}function Kc(e){return yt("note",He(e))}function Ge(e,t){let n=Pe.toWords(t);return Pe.encode(e,n,cn)}function yt(e,t){return Ge(e,t)}function Wc(e){let t=wt({0:[He(e.pubkey)],1:(e.relays||[]).map(n=>Q.encode(n))});return Ge("nprofile",t)}function Zc(e){let t;e.kind!==void 0&&(t=Dc(e.kind));let n=wt({0:[He(e.id)],1:(e.relays||[]).map(r=>Q.encode(r)),2:e.author?[He(e.author)]:[],3:t?[new Uint8Array(t)]:[]});return Ge("nevent",n)}function Fc(e){let t=new ArrayBuffer(4);new DataView(t).setUint32(0,e.kind,!1);let n=wt({0:[Q.encode(e.identifier)],1:(e.relays||[]).map(r=>Q.encode(r)),2:[He(e.pubkey)],3:[new Uint8Array(t)]});return Ge("naddr",n)}function Gc(e){let t=wt({0:[Q.encode(e)]});return Ge("nrelay",t)}function wt(e){let t=[];return Object.entries(e).reverse().forEach(([n,r])=>{r.forEach(o=>{let s=new Uint8Array(o.length+2);s.set([parseInt(n)],0),s.set([o.length],1),s.set(o,2),t.push(s)})}),lt(...t)}var Jc={};D(Jc,{decrypt:()=>Yc,encrypt:()=>Hr});async function Hr(e,t,n){const r=e instanceof Uint8Array?Z(e):e,o=Me.getSharedSecret(r,"02"+t),s=Pr(o);let i=Uint8Array.from(tr(16)),a=Q.encode(n),c=fr(s,i).encrypt(a),l=ce.encode(new Uint8Array(c)),f=ce.encode(new Uint8Array(i.buffer));return`${l}?iv=${f}`}async function Yc(e,t,n){const r=e instanceof Uint8Array?Z(e):e;let[o,s]=n.split("?iv="),i=Me.getSharedSecret(r,"02"+t),a=Pr(i),c=ce.decode(s),l=ce.decode(o),f=fr(a,c).decrypt(l);return ne.decode(f)}function Pr(e){return e.slice(1,33)}var Xc={};D(Xc,{NIP05_REGEX:()=>Mr,isValid:()=>ta,queryProfile:()=>qr,searchDomain:()=>ea,useFetchImplementation:()=>Qc});var Mr=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,bt;try{bt=fetch}catch{}function Qc(e){bt=e}async function ea(e,t=""){try{const n=`https://${e}/.well-known/nostr.json?name=${t}`;return(await(await bt(n,{redirect:"error"})).json()).names}catch{return{}}}async function qr(e){var s;const t=e.match(Mr);if(!t)return null;const[n,r="_",o]=t;try{const i=`https://${o}/.well-known/nostr.json?name=${r}`,a=await(await bt(i,{redirect:"error"})).json();let c=a.names[r];return c?{pubkey:c,relays:(s=a.relays)==null?void 0:s[c]}:null}catch{return null}}async function ta(e,t){let n=await qr(t);return n?n.pubkey===e:!1}var na={};D(na,{parse:()=>ra});function ra(e){const t={reply:void 0,root:void 0,mentions:[],profiles:[]},n=[];for(const r of e.tags)r[0]==="e"&&r[1]&&n.push(r),r[0]==="p"&&r[1]&&t.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let r=0;r<n.length;r++){const o=n[r],[s,i,a,c]=o,l={id:i,relays:a?[a]:[]},f=r===0,u=r===n.length-1;if(c==="root"){t.root=l;continue}if(c==="reply"){t.reply=l;continue}if(c==="mention"){t.mentions.push(l);continue}if(f){t.root=l;continue}if(u){t.reply=l;continue}t.mentions.push(l)}return t}var oa={};D(oa,{fetchRelayInformation:()=>ia,useFetchImplementation:()=>sa});var jr;try{jr=fetch}catch{}function sa(e){jr=e}async function ia(e){return await(await fetch(e.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}var ca={};D(ca,{getPow:()=>Dr,minePow:()=>aa});function Dr(e){let t=0;for(let n=0;n<e.length;n++){const r=parseInt(e[n],16);if(r===0)t+=4;else{t+=Math.clz32(r)-28;break}}return t}function aa(e,t){let n=0;const r=e,o=["nonce",n.toString(),t.toString()];for(r.tags.push(o);;){const s=Math.floor(new Date().getTime()/1e3);if(s!==r.created_at&&(n=0,r.created_at=s),o[1]=(++n).toString(),r.id=Qe(r),Dr(r.id)>=t)break}return r}var la={};D(la,{finishRepostEvent:()=>ua,getRepostedEvent:()=>fa,getRepostedEventPointer:()=>Vr});function ua(e,t,n,r){return ve({kind:rn,tags:[...e.tags??[],["e",t.id,n],["p",t.pubkey]],content:e.content===""?"":JSON.stringify(t),created_at:e.created_at},r)}function Vr(e){if(e.kind!==rn)return;let t,n;for(let r=e.tags.length-1;r>=0&&(t===void 0||n===void 0);r--){const o=e.tags[r];o.length>=2&&(o[0]==="e"&&t===void 0?t=o:o[0]==="p"&&n===void 0&&(n=o))}if(t!==void 0)return{id:t[1],relays:[t[2],n==null?void 0:n[2]].filter(r=>typeof r=="string"),author:n==null?void 0:n[1]}}function fa(e,{skipVerification:t}={}){const n=Vr(e);if(n===void 0||e.content==="")return;let r;try{r=JSON.parse(e.content)}catch{return}if(r.id===n.id&&!(!t&&!dt(r)))return r}var ha={};D(ha,{NOSTR_URI_REGEX:()=>Et,parse:()=>pa,test:()=>da});var Et=new RegExp(`nostr:(${Or.source})`);function da(e){return typeof e=="string"&&new RegExp(`^${Et.source}$`).test(e)}function pa(e){const t=e.match(new RegExp(`^${Et.source}$`));if(!t)throw new Error(`Invalid Nostr URI: ${e}`);return{uri:t[0],value:t[1],decoded:gt(t[1])}}var ga={};D(ga,{finishReactionEvent:()=>ya,getReactedEventPointer:()=>wa});function ya(e,t,n){const r=t.tags.filter(o=>o.length>=2&&(o[0]==="e"||o[0]==="p"));return ve({...e,kind:on,tags:[...e.tags??[],...r,["e",t.id],["p",t.pubkey]],content:e.content??"+"},n)}function wa(e){if(e.kind!==on)return;let t,n;for(let r=e.tags.length-1;r>=0&&(t===void 0||n===void 0);r--){const o=e.tags[r];o.length>=2&&(o[0]==="e"&&t===void 0?t=o:o[0]==="p"&&n===void 0&&(n=o))}if(!(t===void 0||n===void 0))return{id:t[1],relays:[t[2],n[2]].filter(r=>r!==void 0),author:n[1]}}var ba={};D(ba,{matchAll:()=>Ea,regex:()=>an,replaceAll:()=>ma});var an=()=>new RegExp(`\\b${Et.source}\\b`,"g");function*Ea(e){const t=e.matchAll(an());for(const n of t)try{const[r,o]=n;yield{uri:r,value:o,decoded:gt(o),start:n.index,end:n.index+r.length}}catch{}}function ma(e,t){return e.replaceAll(an(),(n,r)=>t({uri:n,value:r,decoded:gt(r)}))}var va={};D(va,{channelCreateEvent:()=>xa,channelHideMessageEvent:()=>Sa,channelMessageEvent:()=>_a,channelMetadataEvent:()=>Aa,channelMuteUserEvent:()=>Ba});var xa=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return ve({kind:_r,tags:[...e.tags??[]],content:n,created_at:e.created_at},t)},Aa=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return ve({kind:Sr,tags:[["e",e.channel_create_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},_a=(e,t)=>{const n=[["e",e.channel_create_event_id,e.relay_url,"root"]];return e.reply_to_channel_message_event_id&&n.push(["e",e.reply_to_channel_message_event_id,e.relay_url,"reply"]),ve({kind:Br,tags:[...n,...e.tags??[]],content:e.content,created_at:e.created_at},t)},Sa=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return ve({kind:Ir,tags:[["e",e.channel_message_event_id],...e.tags??[]],content:n,created_at:e.created_at},t)},Ba=(e,t)=>{let n;if(typeof e.content=="object")n=JSON.stringify(e.content);else if(typeof e.content=="string")n=e.content;else return;return ve({kind:Tr,tags:[["p",e.pubkey_to_mute],...e.tags??[]],content:n,created_at:e.created_at},t)},Ia={};D(Ia,{EMOJI_SHORTCODE_REGEX:()=>zr,matchAll:()=>Ta,regex:()=>ln,replaceAll:()=>ka});var zr=/:(\w+):/,ln=()=>new RegExp(`\\B${zr.source}\\B`,"g");function*Ta(e){const t=e.matchAll(ln());for(const n of t)try{const[r,o]=n;yield{shortcode:r,name:o,start:n.index,end:n.index+r.length}}catch{}}function ka(e,t){return e.replaceAll(ln(),(n,r)=>t({shortcode:n,name:r}))}var La={};D(La,{useFetchImplementation:()=>Ra,validateGithub:()=>Ua});var un;try{un=fetch}catch{}function Ra(e){un=e}async function Ua(e,t,n){try{return await(await un(`https://gist.github.com/${t}/${n}/raw`)).text()===`Verifying that I control the following Nostr public key: ${e}`}catch{return!1}}var $a={};D($a,{decrypt:()=>Yr,encrypt:()=>Jr,getConversationKey:()=>Zr,v2:()=>Pa});var Kr=1,Wr=65535;function Zr(e,t){const n=Me.getSharedSecret(e,"02"+t).subarray(1,33);return ci(Fe,n,"nip44-v2")}function Fr(e,t){const n=ai(Fe,e,t,76);return{chacha_key:n.subarray(0,32),chacha_nonce:n.subarray(32,44),hmac_key:n.subarray(44,76)}}function fn(e){if(!Number.isSafeInteger(e)||e<1)throw new Error("expected positive integer");if(e<=32)return 32;const t=1<<Math.floor(Math.log2(e-1))+1,n=t<=256?32:t/8;return n*(Math.floor((e-1)/n)+1)}function Ca(e){if(!Number.isSafeInteger(e)||e<Kr||e>Wr)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");const t=new Uint8Array(2);return new DataView(t.buffer).setUint16(0,e,!1),t}function Na(e){const t=Q.encode(e),n=t.length,r=Ca(n),o=new Uint8Array(fn(n)-n);return lt(r,t,o)}function Oa(e){const t=new DataView(e.buffer).getUint16(0),n=e.subarray(2,2+t);if(t<Kr||t>Wr||n.length!==t||e.length!==2+fn(t))throw new Error("invalid padding");return ne.decode(n)}function Gr(e,t,n){if(n.length!==32)throw new Error("AAD associated data must be 32 bytes");const r=lt(n,t);return ft(Fe,e,r)}function Ha(e){if(typeof e!="string")throw new Error("payload must be a valid string");const t=e.length;if(t<132||t>87472)throw new Error("invalid payload length: "+t);if(e[0]==="#")throw new Error("unknown encryption version");let n;try{n=ce.decode(e)}catch(s){throw new Error("invalid base64: "+s.message)}const r=n.length;if(r<99||r>65603)throw new Error("invalid data length: "+r);const o=n[0];if(o!==2)throw new Error("unknown encryption version "+o);return{nonce:n.subarray(1,33),ciphertext:n.subarray(33,-32),mac:n.subarray(-32)}}function Jr(e,t,n=tr(32)){const{chacha_key:r,chacha_nonce:o,hmac_key:s}=Fr(t,n),i=Na(e),a=gr(r,o,i),c=Gr(s,a,n);return ce.encode(lt(new Uint8Array([2]),n,a,c))}function Yr(e,t){const{nonce:n,ciphertext:r,mac:o}=Ha(e),{chacha_key:s,chacha_nonce:i,hmac_key:a}=Fr(t,n),c=Gr(a,r,n);if(!Ds(c,o))throw new Error("invalid MAC");const l=gr(s,i,r);return Oa(l)}var Pa={utils:{getConversationKey:Zr,calcPaddedLen:fn},encrypt:Jr,decrypt:Yr},Ma={};D(Ma,{makeNwcRequestEvent:()=>ja,parseConnectionString:()=>qa});function qa(e){const{pathname:t,searchParams:n}=new URL(e),r=t,o=n.get("relay"),s=n.get("secret");if(!r||!o||!s)throw new Error("invalid connection string");return{pubkey:r,relay:o,secret:s}}async function ja(e,t,n){const o=await Hr(t,e,JSON.stringify({method:"pay_invoice",params:{invoice:n}})),s={kind:Lr,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",e]]};return ve(s,t)}var Da={};D(Da,{getZapEndpoint:()=>za,makeZapReceipt:()=>Za,makeZapRequest:()=>Ka,useFetchImplementation:()=>Va,validateZapRequest:()=>Wa});var hn;try{hn=fetch}catch{}function Va(e){hn=e}async function za(e){try{let t="",{lud06:n,lud16:r}=JSON.parse(e.content);if(n){let{words:i}=Pe.decode(n,1e3),a=Pe.fromWords(i);t=ne.decode(a)}else if(r){let[i,a]=r.split("@");t=new URL(`/.well-known/lnurlp/${i}`,`https://${a}`).toString()}else return null;let s=await(await hn(t)).json();if(s.allowsNostr&&s.nostrPubkey)return s.callback}catch{}return null}function Ka({profile:e,event:t,amount:n,relays:r,comment:o=""}){if(!n)throw new Error("amount not given");if(!e)throw new Error("profile not given");let s={kind:9734,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",e],["amount",n.toString()],["relays",...r]]};return t&&s.tags.push(["e",t]),s}function Wa(e){let t;try{t=JSON.parse(e)}catch{return"Invalid zap request JSON."}if(!wr(t))return"Zap request is not a valid Nostr event.";if(!dt(t))return"Invalid signature on zap request.";let n=t.tags.find(([s,i])=>s==="p"&&i);if(!n)return"Zap request doesn't have a 'p' tag.";if(!n[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=t.tags.find(([s,i])=>s==="e"&&i);return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":t.tags.find(([s,i])=>s==="relays"&&i)?null:"Zap request doesn't have a 'relays' tag."}function Za({zapRequest:e,preimage:t,bolt11:n,paidAt:r}){let o=JSON.parse(e),s=o.tags.filter(([a])=>a==="e"||a==="p"||a==="a"),i={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...s,["P",o.pubkey],["bolt11",n],["description",e]]};return t&&i.tags.push(["preimage",t]),i}var Fa={};D(Fa,{getToken:()=>Ga,hashPayload:()=>dn,unpackEventFromToken:()=>Qr,validateEvent:()=>so,validateEventKind:()=>to,validateEventMethodTag:()=>ro,validateEventPayloadTag:()=>oo,validateEventTimestamp:()=>eo,validateEventUrlTag:()=>no,validateToken:()=>Ja});var Xr="Nostr ";async function Ga(e,t,n,r=!1,o){const s={kind:sn,tags:[["u",e],["method",t]],created_at:Math.round(new Date().getTime()/1e3),content:""};o&&s.tags.push(["payload",dn(o)]);const i=await n(s);return(r?Xr:"")+ce.encode(Q.encode(JSON.stringify(i)))}async function Ja(e,t,n){const r=await Qr(e).catch(s=>{throw s});return await so(r,t,n).catch(s=>{throw s})}async function Qr(e){if(!e)throw new Error("Missing token");e=e.replace(Xr,"");const t=ne.decode(ce.decode(e));if(!t||t.length===0||!t.startsWith("{"))throw new Error("Invalid token");return JSON.parse(t)}function eo(e){return e.created_at?Math.round(new Date().getTime()/1e3)-e.created_at<60:!1}function to(e){return e.kind===sn}function no(e,t){const n=e.tags.find(r=>r[0]==="u");return n?n.length>0&&n[1]===t:!1}function ro(e,t){const n=e.tags.find(r=>r[0]==="method");return n?n.length>0&&n[1].toLowerCase()===t.toLowerCase():!1}function dn(e){const t=Fe(Q.encode(JSON.stringify(e)));return Z(t)}function oo(e,t){const n=e.tags.find(o=>o[0]==="payload");if(!n)return!1;const r=dn(t);return n.length>0&&n[1]===r}async function so(e,t,n,r){if(!dt(e))throw new Error("Invalid nostr event, signature invalid");if(!to(e))throw new Error("Invalid nostr event, kind invalid");if(!eo(e))throw new Error("Invalid nostr event, created_at timestamp invalid");if(!no(e,t))throw new Error("Invalid nostr event, url tag invalid");if(!ro(e,n))throw new Error("Invalid nostr event, method tag invalid");if(r&&typeof r=="object"&&Object.keys(r).length>0&&!oo(e,r))throw new Error("Invalid nostr event, payload tag does not match request body hash");return!0}function Ya(e){let t=e[3]+"",n;return{c(){n=Vt(t)},l(r){n=zt(r,t)},m(r,o){$e(r,n,o)},p:ze,d(r){r&&Ce(n)}}}function Xa(e){let t=e[2]+"",n;return{c(){n=Vt(t)},l(r){n=zt(r,t)},m(r,o){$e(r,n,o)},p:ze,d(r){r&&Ce(n)}}}function Qa(e){let t;return{c(){t=Vt("waiting...")},l(n){t=zt(n,"waiting...")},m(n,r){$e(n,t,r)},p:ze,d(n){n&&Ce(t)}}}function el(e){let t,n="Nostr Storage",r,o,s={ctx:e,current:null,token:null,hasCatch:!0,pending:Qa,then:Xa,catch:Ya,value:2,error:3};return _o(e[0](),s),{c(){t=Eo("h1"),t.textContent=n,r=mo(),o=wn(),s.block.c()},l(i){t=vo(i,"H1",{"data-svelte-h":!0}),xo(t)!=="svelte-g4ywwb"&&(t.textContent=n),r=Ao(i),o=wn(),s.block.l(i)},m(i,a){$e(i,t,a),$e(i,r,a),$e(i,o,a),s.block.m(i,s.anchor=a),s.mount=()=>o.parentNode,s.anchor=o},p(i,[a]){e=i,So(s,e,a)},i:ze,o:ze,d(i){i&&(Ce(t),Ce(r),Ce(o)),s.block.d(i),s.token=null,s=null}}}function tl(e){const t=["wss://nostr.mutinywallet.com","wss://relay.snort.social","wss://nostr.wine","wss://nos.lol","wss://relay.damus.io"];async function n(){const r=new qc,o=[{kinds:[1],limit:100}];return r.subscribeMany(t,o,{onevent(s){console.log(s)}}),console.log(r),r}return[n]}class ul extends wo{constructor(t){super(),bo(this,t,tl,el,fo,{})}}export{ul as component};
